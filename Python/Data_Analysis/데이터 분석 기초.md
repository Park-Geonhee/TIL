> "모두의 데이터 분석 with 파이썬" 교재를 참고하여 정리한 내용입니다.

## 기온 공공데이터 분석
---
### CSV 파일이란?
- CSV : Comma-Separated-Values 의 약자
- 각각의 데이터 값을 콤마(,)로 구분하는 파일 형식
- 엑셀, 메모장 등의 프로그램으로 열 수 있음

### CSV 파일에서 데이터 읽어오기
- Python의 CSV 모듈을 사용합니다.
- CSV 모듈의 함수에는 `reader()` , `writer()` 와 같은 함수가 내장되어 있습니다.

  - `csv.reader()` : CSV 파일에서 데이터를 읽어오는 함수
  - `csv.writer()` : CSV 파일에 데이터를 저장하는 함수

- 실습을 위해 [기상자료개방포털](https://data.kma.go.kr)에서 기온정보를 받아옵니다.
- 10여년간 서울의 기온 분석 공공데이터를 `seoul.csv` 파일로 저장합니다.


### CSV 파일 출력하기
- CSV 파일을 출력하는 코드는 다음과 같습니다.
```python
import csv
f = open('seoul.scv','r',encoding = 'cp949')
data = csv.reader(f, delimiter = ',')
for row in data:
    print(row)
f.close
```
- 해당 결과는 다음과 같습니다.
```
['\t\t지점번호', '지점명', '일시', '평균기온(℃)', '평균최고기온(℃)', '최고기온(℃)', '\t최고기온일자', '평균최저기온(℃)', '최저기온(℃)', '최저기온일자']
['\t\t108', '서울', 'Jan-08', '-1.7', '1.9', '7.3', '2008-01-06', '-5', '-11.1', '2008-01-17']
['\t\t108', '서울', 'Feb-08', '-1.2', '3.2', '10.5', '2008-02-22', '-4.9', '-10.1', '2008-02-13']
...
```
- `open()` 함수 사용 시 주의사항
    - `'seoul.csv'`과 같이 쓰기 위해서는 저장경로를 파이썬과 같은 위치에 주어야 합니다.
    - 혹은 csv 파일의 절대 경로를 입력하여야 합니다.
    - 파일에 한글이 쓰여져 있을 경우, 파일의 형식에 따라 `encoding='cp949'` 혹은 `encoding='utf8'` 을 사용하여야 합니다.

### 데이터의 헤더 저장하기
- `헤더(header)`란 데이터 파일에서 여러 가지 값들이 어떤 의미를 갖는지 표시한 행을 말하며, 데이터 파일의 1행에 위치합니다.
- 헤더 파일을 추출하는 코드는 다음과 같습니다.
```python
import csv
f = open('seoul.csv')
data = csv.reader(f, delimiter=',')
header = next(data)
print(header)
f.close()
```
- 결과는 다음과 같습니다.
```
['\t\t지점번호', '지점명', '일시', '평균기온(℃)', '평균최고기온(℃)', '최고기온(℃)', '\t최고기온일자', '평균최저기온(℃)', '최저기온(℃)', '최저기온일자']
```
- `next()` : 첫 번째 데이터 행을 읽어 오면서 데이터의 탐색 위치를 다음 행으로 이동시키는 명령입니다.

### 특정 데이터 추출하기 : 가장 더웠던 날은?

- 위를 바탕으로 가장 더웠던 날의 코드를 작성하면 다음과 같습니다.
```python
f = open('seoul.csv','r',encoding='CP949')
data = csv.reader(f, delimiter=',')
header = next(data)
max_temp = -999 # 최고기온 초기값 설정(값 초기화)
max_date = ''   # 최고기온날짜 초기값 설정(값 초기화)
for row in data: 
    #누락된 데이터 처리
    if row[5]=='':
        row[5]=-999
    row[5] = float(row[5]) # 최고기온 데이터 형식 변경(str > float)
    if row[5] > max_temp:
        max_temp = row[5]
        max_date = row[6]
f.close()
print(max_temp,max_date)
```
- 결과는 다음과 같습니다.
```
39.6 2018-08-01
```